<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">

    <title>Tracking Twitch by Torben Jessen</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" th:inline="javascript">
        var dateList =  [[${date}]];
        var viewerList =  [[${viewer}]];
        google.charts.load('current', {'packages':['line']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Day');
            data.addColumn('number', 'Viewers');

            console.log(typeof dateList[0]);
            console.log(typeof viewerList[0]);

            data.addRows([
                [dateList[0].substr(0,4),  viewerList[0]],
                [dateList[1].substr(0,4),  viewerList[1]],
                [dateList[2].substr(0,4),  viewerList[2]],
                [dateList[3].substr(0,4),  viewerList[6]],
                [dateList[4].substr(0,4),  viewerList[22]],
                [dateList[5].substr(0,4),  viewerList[8]],
                [dateList[6].substr(0,4),  viewerList[17]],
                [dateList[7].substr(0,4),  viewerList[19]],
                [dateList[8].substr(0,4),  viewerList[8]],
                [dateList[9].substr(0,4),  viewerList[9]],
                [dateList[10].substr(0,4),  viewerList[10]],
                [dateList[11].substr(0,4),  viewerList[11]],
                [dateList[12].substr(0,4),  viewerList[12]],
                [dateList[13].substr(0,4),  viewerList[13]],
                [dateList[14].substr(0,4),  viewerList[13]],
                [dateList[15].substr(0,4),  viewerList[14]],
                [dateList[16].substr(0,4),  viewerList[14]],
                [dateList[17].substr(0,4),  viewerList[15]]
            ]);

//            data.addRows([
//                ['1',  37.8],
//                ['1',  30.9],
//                ['1',  25.4],
//                ['1',  11.7],
//                ['1',  11.9],
//                ['1',   8.8],
//                ['1',   7.6],
//                ['1',  12.3],
//                ['1',  16.9],
//                ['1', 12.8],
//                ['1',  5.3],
//                ['1',  6.6],
//                ['1',  4.8],
//                ['1',  4.2]
//            ]);

            var options = {
                chart: {
                    title: 'League of Legends viewer'
                },
                width: 900,
                height: 500
            };

            var chart = new google.charts.Line(document.getElementById('linechart_material'));

            chart.draw(data, options);
        }
    </script>

</head>

<body>
    <p th:text="'Hello, ' + ${name} + '!'" />
    <div id="linechart_material" style="width: 900px; height: 500px"></div>
</body>
</html>